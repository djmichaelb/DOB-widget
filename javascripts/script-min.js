$(document).ready(function(){var a=function(){var q=31;var h=12;var d=new Date();var z=d.getFullYear();var s=d.getMonth();var m=d.getDay();var u=z-111;var w=z-2000;var x=false;var n;var g={n48:0,n49:1,n50:2,n51:3,n52:4,n53:5,n54:6,n55:7,n56:8,n57:9};var t={m01:31,m02:29,m03:31,m04:30,m05:31,m06:30,m07:31,m08:31,m09:30,m10:31,m11:30,m12:31,m13:28};var o={m01:"Jan",m02:"Feb",m03:"Mar",m04:"Apr",m05:"May",m06:"Jun",m07:"Jul",m08:"Aug",m09:"Sep",m10:"Oct",m11:"Nov",m12:"Dec",m13:"Feb"};var v=function(){$(".dob-wrapper").addClass("active");$(".dob-wrapper input").each(function(A){$(this).after('<span class="placeholder">'+$(this).attr("rel")+"</span>").next(".placeholder").css({left:$(this).position().left,width:$(this).width()}).on("click",function(B){$(this).hide().prev("input").focus();});$(this).on("focus",function(B){$(this).parent(".dob-wrapper").addClass("focus");$(this).next(".placeholder").hide();}).on("blur",function(B){$(this).val(l($(this).val(),$(this).attr("id")));e(this);$(this).parent(".dob-wrapper").removeClass("focus").siblings(".hint").hide();if(!$(this).val()){$(this).next(".placeholder").show();}}).on("keydown",function(B){b(B,this);});if($(this).val()){$(this).val(l($(this).val())).next(".placeholder").hide();}});};var b=function(E,D){type=$(D).attr("id");var A=[8,9,13,16,17,18,35,36,37,39,46];var B=A.join(",").match(new RegExp(E.which));if(B){c();if(E.which==8){y(D,E);}return;}else{if(E.which==191){E.preventDefault();if(type=="dob-day"){$("#dob-month").focus();}else{if(type=="dob-month"){$("#dob-year").focus();}else{return;}}}else{if(48<=E.which&&E.which<=57){var C=g["n"+E.which];}else{if(96<=E.which&&E.which<=105){var C=g["n"+(E.which-48)];}else{r("Numerals only");E.preventDefault();return;}}c();f(E,D,C);}}};var e=function(C){var B=false,A=[];if(!i($("#dob-day").val())){A.push("day");B=true;}if(!k($("#dob-month").val())){A.push("month");B=true;}if(!p($("#dob-year").val())){A.push("year");B=true;}if(B){message="invalid "+A.join(", ");r(message);}else{c();}};var r=function(A){if(!x){x=true;$(".dob .validation").hide().html("<span>"+A+"</span>");$(".dob .validation").fadeIn("fast");$(".dob-wrapper").addClass("error");}};var c=function(){if(x){$(".dob .validation").hide().html("");$(".dob-wrapper").removeClass("error");x=false;}};var j=function(A){if((parseInt(A)%4)==0){if(parseInt(A)%100==0){if(parseInt(A)%400!=0){return false;}else{return true;}}return true;}else{return false;}};var l=function(B,A){numTestValue=+B;if(A=="dob-day"||A=="dob-month"||!A){if(B&&(0<numTestValue&&numTestValue<10)){return"0"+numTestValue;}else{if(numTestValue){return numTestValue;}else{return B;}}}else{if(A=="dob-year"){if(!B||B.length>2){return B;}else{switch(true){case (numTestValue<10):return"200"+numTestValue;break;case (numTestValue<=w):return"20"+numTestValue;break;default:return"19"+numTestValue;break;}}}else{if(B&&numTestValue<10){return numTestValue;}else{return B;}}}};var y=function(A,B){type=$(A).attr("id");if(type=="dob-month"&&$(A).val().length<1){$("#dob-day").focus();
B.preventDefault();}else{if(type=="dob-year"&&$(A).val().length<1){$("#dob-month").focus();B.preventDefault();}else{return;}}};var i=function(A){month=$("#dob-month").val();year=$("#dob-year").val();if(!A){return true;}A=+A;if(!month||!k(month)){return(0<A&&A<=q)?true:false;}else{if(month=="02"&&year){if(j(year)){return(A<=t.m02)?true:false;}else{if(A<t.m02){return true;}else{if(A==29){return false;}else{return false;}}}}else{if(year>=z&&month>=s&&day>=m){return false;}else{return(A<=t["m"+month])?true:false;}}}};var k=function(A){if(!A){return true;}days=$("#dob-day").val();year=$("#dob-year").val();A=l(String(A),"dob-month");if(!days){return(+A<=h)?true:false;}else{if((A=="02"&&!year)||(A=="02"&&j(parseInt(year)))){if(+days<=t.m02){return true;}else{r("There are not "+days+" days in Feb.");return false;}}else{if(A=="02"){if(parseInt(days)>t.m13){return false;}else{return true;}}else{if(A>h){return false;}else{if(year>=z&&A>=s&&day>=m){return false;}else{if(+days<=t["m"+A]){return true;}else{return false;}}}}}}};var p=function(A){days=$("#dob-day").val();month=$("#dob-month").val();if(!A){return true;}else{if(month=="02"&&days=="29"){if(j(A)){return true;}else{r(A+" was not a leap year");return false;}}else{if((parseInt(A)<=u)||(z<parseInt(A))){return false;}else{if(parseInt(A)==z){if(parseInt(month)>s){return false;}else{if(parseInt(month)==s){if(parseInt(days)>m){return false;}}}return true;}else{if(A>=z&&month>=s&&day>=m){return false;}else{return true;}}}}}};var f=function(C,B,A){C.preventDefault();type=$(B).attr("id");newInput=$(B).val()+A;if(type=="dob-day"){switch(newInput.length){case 1:$(B).val(newInput);break;case 2:if(i(parseInt(newInput))){$(B).val(newInput);$("#dob-month").focus();}else{r("Invalid day");}break;case 3:$(B).val(A);break;default:break;}return;}else{if(type=="dob-month"){switch(newInput.length){case 1:$(B).val(newInput);break;case 2:if(k(parseInt(newInput))){$(B).val(parseInt(newInput));$("#dob-year").focus();}else{r("Invalid month");}break;case 3:$(B).val(A);break;default:break;}}else{switch(newInput.length){case 1:$(B).val(newInput);break;case 2:if((parseInt(newInput)==19)||(parseInt(newInput)==20)){$(B).val(newInput);return;}else{newInput=l(newInput,"dob-year");if(p(newInput)){$(B).val(newInput);}else{r("Invalid year");}}break;case 3:$(B).val(newInput);break;case 4:if(p(parseInt(newInput))){$(B).val(parseInt(newInput));}else{r("Invalid year");}break;case 5:break;default:break;}}}};v();return{testName:b};}();$("form input").on("focus",function(b){$(this).siblings(".hint").fadeIn("fast");}).on("blur",function(b){$(this).siblings(".hint").hide();});$("#test-field").on("keydown",function(b){b.preventDefault();a.testName(b,$(this));});});